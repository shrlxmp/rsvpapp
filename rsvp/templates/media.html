{% extends 'base.html' %}

{% block content %}

    {% if youtube_playlist %}
        <p class="h3">{{TEXT1}} Videos</p>
        <div class="embed-responsive embed-responsive-16by9">
            <iframe width="800" height="450" src="https://www.youtube-nocookie.com/embed/videoseries?list={{youtube_playlist}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    {% endif %}

    {% if photos %}
        <p class="h3">New GDrive Photos</p>
        <ul>
            {% for group in photos|groupby('gdrive_path') %}
                <li>
                    <a href="https://drive.google.com/drive/folders/{{ group.list[0].gdrive_parent }}" target="_blank">
                        {{ group.grouper }}
                    </a>
                    ({{ group.list|length }} new photos)
                </li>
                {% for photo in group.list %}
                    <a href="https://drive.google.com/file/d/{{ photo.gdrive_id }}/preview" target="_blank">{{ loop.index }}
                    </a>
                {% endfor %}
            {% endfor %}
        </ul>
    {% endif %}
    <p class="h3">GDrive Directories</p>
    <p>You can view the pictures on a <a href="{{ url_for('photo_map') }}">map</a>, if you like</p>
    <ul>
        {% for dir in gdrive_dirs %}
            <li>
                <a href="https://drive.google.com/drive/folders/{{ dir.id }}" target="_blank">{{ dir.name }}</a>
            </li>
        {% endfor %}
    </ul>

    <p class="h3">Social media profiles</p>
    {% for platform in social if platform.url %}
        <p>
            <a class="h2" href="{{platform.url}}" target="_blank" title="{{platform.name}}">
                <i class="fab fa-{{platform.icon}}"></i>
            </a>
            {{ platform.description }}
        </p>
        {% if platform.password %}
            <div class="input-group">
                <input type="password" class="form-control pwd" value="{{ platform.password }}" readonly>
                <span class="input-group-btn">
                    <button class="btn btn-default reveal btn-sm" type="button"><i class="fas fa-eye"></i></button>
                    <button class="btn btn-outline-primary btn-sm my-2 copy-button"
                            data-placement="bottom"
                            data-clipboard-action="copy"
                            data-clipboard-text="{{platform.password}}">
                        <i class="fas fa-copy"></i>
                    </button>
                </span>
            </div>
        {% endif %}
    {% endfor %}

{% endblock %}

{% block scripts %}
    <script>
     $(".reveal").on('click',function() {
         var $pwd = $(this).parent().parent().find(".pwd");
         if ($pwd.attr('type') === 'password') {
             $pwd.attr('type', 'text');
         } else {
             $pwd.attr('type', 'password');
         }
     });
    </script>
{% endblock %}
